<div class="container show-margin user-info">
  <div class="row">
    <div class="col-md-4">
      <%= render partial: 'user_show', locals: { user: @user }%>
      <% if @user.id == current_user.id %>
      <%= link_to "Edit Profile", edit_user_registration_path, class: "btn btn-primary edit_margin" %>
      <% end %>
      <%= link_to "New Chat", chat_rooms_path(user_two_id: @user.id), method: :post, class: "btn btn-success edit_margin" %>

    </div>
    <div class="row-md-2">
      <h2>Posts by <%= @user.first_name %></h2>
      <% @user.posts.each do |post| %>   
         <div class="post">
            <div class="user-avatar">
              <%= link_to(image_tag(post.user.profile_image.url(:thumb), alt: "User Avatar") + "  " + post.user.first_name + " " + post.user.last_name, post.user, class: "no-link-style") %>
            </div>
            <div class="post-images">
                <% if post.images %>
                    <%= image_tag post.images.first.image_url, class: "post-image" %>
                <% end %>
            </div>
            <div class="card-body">
                <h5 class="card-title"><%= post.title %></h5>
                <p class="card-text"><%= truncate(post.body, length: 150) %></p>
                <%= link_to "Read more", post_path(post), class: "btn btn-primary" %>
            </div>
      </div>
      <% end %>
    </div>
  </div>
</div>
